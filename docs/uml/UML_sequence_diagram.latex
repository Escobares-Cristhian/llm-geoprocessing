% generated by Plantuml 1.2024.3       
\definecolor{plantucolor0000}{RGB}{204,255,204}
\definecolor{plantucolor0001}{RGB}{24,24,24}
\definecolor{plantucolor0002}{RGB}{0,0,0}
\definecolor{plantucolor0003}{RGB}{221,221,221}
\definecolor{plantucolor0004}{RGB}{255,242,204}
\definecolor{plantucolor0005}{RGB}{255,204,204}
\definecolor{plantucolor0006}{RGB}{204,229,255}
\definecolor{plantucolor0007}{RGB}{255,255,255}
\definecolor{plantucolor0008}{RGB}{226,226,240}
\definecolor{plantucolor0009}{RGB}{238,238,238}
\definecolor{plantucolor0010}{RGB}{254,255,221}
\begin{tikzpicture}[yscale=-1
,pstyle5/.style={color=plantucolor0001,line width=0.5pt,dash pattern=on 5.0pt off 5.0pt}
,pstyle6/.style={color=plantucolor0001,fill=white,line width=1.0pt}
,pstyle7/.style={color=plantucolor0001,fill=plantucolor0008,line width=0.5pt}
,pstyle8/.style={color=plantucolor0001,line width=0.5pt}
,pstyle9/.style={color=plantucolor0001,fill=plantucolor0001,line width=1.0pt}
,pstyle10/.style={color=plantucolor0001,fill=plantucolor0008,line width=1.5pt}
,pstyle11/.style={color=plantucolor0001,line width=1.5pt}
,pstyle12/.style={color=plantucolor0009,fill=plantucolor0009,line width=1.0pt}
,pstyle13/.style={color=black,line width=1.0pt}
,pstyle14/.style={color=black,fill=plantucolor0009,line width=2.0pt}
,pstyle15/.style={color=plantucolor0001,line width=1.0pt}
,pstyle16/.style={color=plantucolor0001,fill=plantucolor0010,line width=0.5pt}
,pstyle17/.style={color=plantucolor0001,line width=1.0pt,dash pattern=on 2.0pt off 2.0pt}
,pstyle18/.style={color=black,fill=plantucolor0009,line width=1.5pt}
,pstyle19/.style={color=black,line width=1.5pt}
]
\draw[color=plantucolor0001,fill=plantucolor0000,line width=0.5pt] (109.6pt,43.4473pt) rectangle (2319.752pt,3025.8613pt);
\node at (1141.4857pt,43.4473pt)[below right,color=black]{\textbf{geollm container}};
\draw[color=plantucolor0001,fill=plantucolor0003,line width=0.5pt] (2351.752pt,43.4473pt) rectangle (3064.8985pt,3025.8613pt);
\node at (2632.7868pt,43.4473pt)[below right,color=black]{\textbf{External Services}};
\draw[color=plantucolor0001,fill=plantucolor0004,line width=0.5pt] (2351.752pt,63.7197pt) rectangle (2576.9433pt,3025.8613pt);
\node at (2405.9655pt,63.7197pt)[below right,color=black]{\textbf{LLM Provider}};
\draw[color=plantucolor0001,fill=plantucolor0005,line width=0.5pt] (2608.9433pt,63.7197pt) rectangle (3064.8985pt,3025.8613pt);
\node at (2818.9015pt,63.7197pt)[below right,color=black]{\textbf{GEE}};
\draw[color=plantucolor0001,fill=plantucolor0006,line width=0.5pt] (3096.8985pt,43.4473pt) rectangle (3546.3698pt,3025.8613pt);
\node at (3242.2934pt,43.4473pt)[below right,color=black]{\textbf{Storage (optional)}};
\node at (1630.8348pt,15pt)[below right,color=black]{\textbf{LLM Geoprocessing - Runtime Call Flow}};
\draw[pstyle5] (43pt,163.8828pt) -- (43pt,3019.8613pt);
\draw[pstyle5] (194.5185pt,163.8828pt) -- (194.5185pt,3019.8613pt);
\draw[pstyle6] (189.5185pt,448.7627pt) rectangle (199.5185pt,3019.8613pt);
\draw[pstyle6] (194.5185pt,979.0947pt) rectangle (204.5185pt,3019.8613pt);
\draw[pstyle6] (199.5185pt,1037.6396pt) rectangle (209.5185pt,3019.8613pt);
\draw[pstyle6] (204.5185pt,1125.1777pt) rectangle (214.5185pt,3019.8613pt);
\draw[pstyle6] (209.5185pt,1480.8818pt) rectangle (219.5185pt,3019.8613pt);
\draw[pstyle6] (214.5185pt,1510.1543pt) rectangle (224.5185pt,3019.8613pt);
\draw[pstyle6] (219.5185pt,2928.3232pt) rectangle (229.5185pt,3019.8613pt);
\draw[pstyle5] (435.0088pt,163.8828pt) -- (435.0088pt,3019.8613pt);
\draw[pstyle6] (430.0088pt,478.0352pt) rectangle (440.0088pt,3019.8613pt);
\draw[pstyle5] (668.1718pt,163.8828pt) -- (668.1718pt,3019.8613pt);
\draw[pstyle6] (663.1718pt,281.6865pt) rectangle (673.1718pt,3019.8613pt);
\draw[pstyle6] (668.1718pt,507.3076pt) rectangle (678.1718pt,3019.8613pt);
\draw[pstyle6] (673.1718pt,536.5801pt) rectangle (683.1718pt,3019.8613pt);
\draw[pstyle6] (678.1718pt,712.9287pt) rectangle (688.1718pt,800.7461pt);
\draw[pstyle6] (678.1718pt,876.2842pt) rectangle (688.1718pt,3019.8613pt);
\draw[pstyle6] (683.1718pt,1346.7988pt) rectangle (693.1718pt,3019.8613pt);
\draw[pstyle6] (688.1718pt,1568.6992pt) rectangle (698.1718pt,3019.8613pt);
\draw[pstyle6] (693.1718pt,1772.7617pt) rectangle (703.1718pt,3019.8613pt);
\draw[pstyle6] (698.1718pt,2721.6953pt) rectangle (708.1718pt,3019.8613pt);
\draw[pstyle6] (703.1718pt,2957.5957pt) rectangle (713.1718pt,3019.8613pt);
\draw[pstyle5] (981.3346pt,163.8828pt) -- (981.3346pt,3019.8613pt);
\draw[pstyle6] (976.3346pt,610.1182pt) rectangle (986.3346pt,1008.3672pt);
\draw[pstyle5] (1226.8323pt,163.8828pt) -- (1226.8323pt,3019.8613pt);
\draw[pstyle6] (1221.8323pt,1243.9883pt) rectangle (1231.8323pt,3019.8613pt);
\draw[pstyle6] (1226.8323pt,1539.4268pt) rectangle (1236.8323pt,3019.8613pt);
\draw[pstyle6] (1231.8323pt,1728.4961pt) rectangle (1241.8323pt,2483.4443pt);
\draw[pstyle5] (1458.9198pt,163.8828pt) -- (1458.9198pt,3019.8613pt);
\draw[pstyle6] (1453.9198pt,2557.9756pt) rectangle (1463.9198pt,3019.8613pt);
\draw[pstyle6] (1458.9198pt,2663.4297pt) rectangle (1468.9198pt,3019.8613pt);
\draw[pstyle5] (1689.4492pt,163.8828pt) -- (1689.4492pt,3019.8613pt);
\draw[pstyle6] (1684.4492pt,1936.8311pt) rectangle (1694.4492pt,2128.3125pt);
\draw[pstyle5] (1932.8022pt,163.8828pt) -- (1932.8022pt,3019.8613pt);
\draw[pstyle6] (1927.8022pt,639.3906pt) rectangle (1937.8022pt,3019.8613pt);
\draw[pstyle6] (1932.8022pt,1273.2607pt) rectangle (1942.8022pt,3019.8613pt);
\draw[pstyle6] (1937.8022pt,2782.2402pt) rectangle (1947.8022pt,3019.8613pt);
\draw[pstyle5] (2191.1326pt,163.8828pt) -- (2191.1326pt,3019.8613pt);
\draw[pstyle6] (2186.1326pt,668.6631pt) rectangle (2196.1326pt,3019.8613pt);
\draw[pstyle6] (2191.1326pt,1302.5332pt) rectangle (2201.1326pt,3019.8613pt);
\draw[pstyle6] (2196.1326pt,2811.5127pt) rectangle (2206.1326pt,3019.8613pt);
\draw[pstyle5] (2464.3476pt,163.8828pt) -- (2464.3476pt,3019.8613pt);
\draw[pstyle6] (2459.3476pt,742.2012pt) rectangle (2469.3476pt,771.4736pt);
\draw[pstyle6] (2459.3476pt,920.5498pt) rectangle (2469.3476pt,949.8223pt);
\draw[pstyle6] (2459.3476pt,1391.0645pt) rectangle (2469.3476pt,1420.3369pt);
\draw[pstyle6] (2459.3476pt,1612.9648pt) rectangle (2469.3476pt,1657.2305pt);
\draw[pstyle6] (2459.3476pt,2854.7852pt) rectangle (2469.3476pt,2899.0508pt);
\draw[pstyle5] (2747.6497pt,163.8828pt) -- (2747.6497pt,3019.8613pt);
\draw[pstyle6] (2742.6497pt,1996.2295pt) rectangle (2752.6497pt,2099.04pt);
\draw[pstyle5] (2976.6273pt,163.8828pt) -- (2976.6273pt,3019.8613pt);
\draw[pstyle6] (2971.6273pt,2040.4951pt) rectangle (2981.6273pt,2069.7676pt);
\draw[pstyle5] (3174.8146pt,163.8828pt) -- (3174.8146pt,3019.8613pt);
\draw[pstyle6] (3169.8146pt,325.9521pt) rectangle (3179.8146pt,3019.8613pt);
\draw[pstyle6] (3174.8146pt,580.8457pt) rectangle (3184.8146pt,3019.8613pt);
\draw[pstyle6] (3179.8146pt,1817.0273pt) rectangle (3189.8146pt,3019.8613pt);
\draw[pstyle6] (3184.8146pt,1861.293pt) rectangle (3194.8146pt,3019.8613pt);
\draw[pstyle6] (3189.8146pt,2247.1094pt) rectangle (3199.8146pt,3019.8613pt);
\draw[pstyle6] (3194.8146pt,2366.9131pt) rectangle (3204.8146pt,3019.8613pt);
\draw[pstyle6] (3199.8146pt,2439.1787pt) rectangle (3209.8146pt,3019.8613pt);
\draw[pstyle6] (3204.8146pt,3001.8613pt) rectangle (3214.8146pt,3019.8613pt);
\draw[pstyle5] (3323.2392pt,163.8828pt) -- (3323.2392pt,3019.8613pt);
\draw[pstyle6] (3318.2392pt,2322.6475pt) rectangle (3328.2392pt,3019.8613pt);
\draw[pstyle5] (3470.0587pt,163.8828pt) -- (3470.0587pt,3019.8613pt);
\draw[pstyle6] (3465.0587pt,2187.7109pt) rectangle (3475.0587pt,3019.8613pt);
\node at (21.0118pt,147.5859pt)[below right,color=black]{User};
\draw[pstyle7] (43pt,96.0859pt) ellipse (8pt and 8pt);
\draw[pstyle8] (43pt,104.0859pt) -- (43pt,131.0859pt)(30pt,112.0859pt) -- (56pt,112.0859pt)(43pt,131.0859pt) -- (30pt,146.0859pt)(43pt,131.0859pt) -- (56pt,146.0859pt);
\node at (159.8276pt,131.2891pt)[below right,color=black]{Chat UI};
\node at (113.6pt,147.5859pt)[below right,color=black]{(cli.chat\_io.ChatIO)};
\draw[pstyle8] (174.0185pt,103.2891pt) -- (174.0185pt,127.2891pt)(174.0185pt,115.2891pt) -- (191.0185pt,115.2891pt);
\draw[pstyle7] (203.0185pt,115.2891pt) ellipse (12pt and 12pt);
\node at (389.4417pt,131.2891pt)[below right,color=black]{Main Loop};
\node at (389.1422pt,147.5859pt)[below right,color=black]{(app.main)};
\draw[pstyle7] (435.0088pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (431.0088pt,103.2891pt) -- (437.0088pt,98.2891pt) -- (435.0088pt,103.2891pt) -- (437.0088pt,108.2891pt) -- (431.0088pt,103.2891pt) -- cycle;
\node at (633.0771pt,131.2891pt)[below right,color=black]{Chatbot};
\node at (577.1266pt,147.5859pt)[below right,color=black]{(app.chatbot.Chatbot)};
\draw[pstyle7] (668.1718pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (664.1718pt,103.2891pt) -- (670.1718pt,98.2891pt) -- (668.1718pt,103.2891pt) -- (670.1718pt,108.2891pt) -- (664.1718pt,103.2891pt) -- cycle;
\node at (895.6176pt,131.2891pt)[below right,color=black]{Mode Selector Agent};
\node at (857.0369pt,147.5859pt)[below right,color=black]{(app.llm.mode\_selector\_agent)};
\draw[pstyle7] (981.3346pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (977.3346pt,103.2891pt) -- (983.3346pt,98.2891pt) -- (981.3346pt,103.2891pt) -- (983.3346pt,108.2891pt) -- (977.3346pt,103.2891pt) -- cycle;
\node at (1152.9236pt,131.2891pt)[below right,color=black]{Geoprocess Agent};
\node at (1115.6323pt,147.5859pt)[below right,color=black]{(app.llm.geoprocess\_agent)};
\draw[pstyle7] (1226.8323pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (1222.8323pt,103.2891pt) -- (1228.8323pt,98.2891pt) -- (1226.8323pt,103.2891pt) -- (1228.8323pt,108.2891pt) -- (1222.8323pt,103.2891pt) -- cycle;
\node at (1386.2722pt,131.2891pt)[below right,color=black]{Interpreter Agent};
\node at (1348.0323pt,147.5859pt)[below right,color=black]{(app.llm.interpreter\_agent)};
\draw[pstyle7] (1458.9198pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (1454.9198pt,103.2891pt) -- (1460.9198pt,98.2891pt) -- (1458.9198pt,103.2891pt) -- (1460.9198pt,108.2891pt) -- (1454.9198pt,103.2891pt) -- cycle;
\node at (1614.0879pt,131.2891pt)[below right,color=black]{Runtime Executor};
\node at (1579.8073pt,147.5859pt)[below right,color=black]{(plugins.runtime\_executor)};
\draw[pstyle7] (1689.4492pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (1685.4492pt,103.2891pt) -- (1691.4492pt,98.2891pt) -- (1689.4492pt,103.2891pt) -- (1691.4492pt,108.2891pt) -- (1685.4492pt,103.2891pt) -- cycle;
\node at (1846.2022pt,131.2891pt)[below right,color=black]{Preprocessing Plugin};
\node at (1809.091pt,147.5859pt)[below right,color=black]{(plugins.preprocessing\_plugin)};
\draw[pstyle7] (1932.8022pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (1928.8022pt,103.2891pt) -- (1934.8022pt,98.2891pt) -- (1932.8022pt,103.2891pt) -- (1934.8022pt,108.2891pt) -- (1928.8022pt,103.2891pt) -- cycle;
\node at (2102.5774pt,131.2891pt)[below right,color=black]{Geoprocessing Plugin};
\node at (2066.5133pt,147.5859pt)[below right,color=black]{(plugins.geoprocessing\_plugin)};
\draw[pstyle7] (2191.1326pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle9] (2187.1326pt,103.2891pt) -- (2193.1326pt,98.2891pt) -- (2191.1326pt,103.2891pt) -- (2193.1326pt,108.2891pt) -- (2187.1326pt,103.2891pt) -- cycle;
\node at (2405.4569pt,114.9922pt)[below right,color=black]{LLM Provider};
\node at (2355.752pt,131.2891pt)[below right,color=black]{[ChatGPT/Gemini/Ollama]};
\node at (2404.2823pt,147.5859pt)[below right,color=black]{(app.llm.LLM)};
\draw[pstyle7] (2464.3476pt,98.9922pt) ellipse (12pt and 12pt);
\draw[pstyle9] (2460.3476pt,86.9922pt) -- (2466.3476pt,81.9922pt) -- (2464.3476pt,86.9922pt) -- (2466.3476pt,91.9922pt) -- (2460.3476pt,86.9922pt) -- cycle;
\node at (2666.2261pt,131.2891pt)[below right,color=black]{GEE Plugin Service};
\node at (2612.9433pt,147.5859pt)[below right,color=black]{(app.plugins.gee.gee\_geoprocess)};
\draw[pstyle8] (2727.1497pt,103.2891pt) -- (2727.1497pt,127.2891pt)(2727.1497pt,115.2891pt) -- (2744.1497pt,115.2891pt);
\draw[pstyle7] (2756.1497pt,115.2891pt) ellipse (12pt and 12pt);
\node at (2903.6732pt,131.2891pt)[below right,color=black]{Earth Engine API};
\node at (2892.3561pt,147.5859pt)[below right,color=black]{(earthengine-api: ee)};
\draw[pstyle7] (2976.6273pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle8] (2964.6273pt,129.2891pt) -- (2988.6273pt,129.2891pt);
\node at (3139.7965pt,131.2891pt)[below right,color=black]{ChatDB};
\node at (3100.8985pt,147.5859pt)[below right,color=black]{(PostGIS schema)};
\draw[pstyle10] (3156.8146pt,95.2891pt) ..controls (3156.8146pt,85.2891pt) and (3174.8146pt,85.2891pt) .. (3174.8146pt,85.2891pt) ..controls (3174.8146pt,85.2891pt) and (3192.8146pt,85.2891pt) .. (3192.8146pt,95.2891pt) -- (3192.8146pt,121.2891pt) ..controls (3192.8146pt,131.2891pt) and (3174.8146pt,131.2891pt) .. (3174.8146pt,131.2891pt) ..controls (3174.8146pt,131.2891pt) and (3156.8146pt,131.2891pt) .. (3156.8146pt,121.2891pt) -- (3156.8146pt,95.2891pt);
\draw[pstyle11] (3156.8146pt,95.2891pt) ..controls (3156.8146pt,105.2891pt) and (3174.8146pt,105.2891pt) .. (3174.8146pt,105.2891pt) ..controls (3174.8146pt,105.2891pt) and (3192.8146pt,105.2891pt) .. (3192.8146pt,95.2891pt);
\node at (3258.7308pt,131.2891pt)[below right,color=black]{PostGIS Raster};
\node at (3289.7651pt,147.5859pt)[below right,color=black]{uploads};
\draw[pstyle10] (3305.2392pt,95.2891pt) ..controls (3305.2392pt,85.2891pt) and (3323.2392pt,85.2891pt) .. (3323.2392pt,85.2891pt) ..controls (3323.2392pt,85.2891pt) and (3341.2392pt,85.2891pt) .. (3341.2392pt,95.2891pt) -- (3341.2392pt,121.2891pt) ..controls (3341.2392pt,131.2891pt) and (3323.2392pt,131.2891pt) .. (3323.2392pt,131.2891pt) ..controls (3323.2392pt,131.2891pt) and (3305.2392pt,131.2891pt) .. (3305.2392pt,121.2891pt) -- (3305.2392pt,95.2891pt);
\draw[pstyle11] (3305.2392pt,95.2891pt) ..controls (3305.2392pt,105.2891pt) and (3323.2392pt,105.2891pt) .. (3323.2392pt,105.2891pt) ..controls (3323.2392pt,105.2891pt) and (3341.2392pt,105.2891pt) .. (3341.2392pt,95.2891pt);
\node at (3400.2518pt,131.2891pt)[below right,color=black]{GeoTIFF Output};
\node at (3397.7476pt,147.5859pt)[below right,color=black]{(GEO\_OUT\_DIR)};
\draw[pstyle7] (3470.0587pt,115.2891pt) ellipse (12pt and 12pt);
\draw[pstyle8] (3458.0587pt,129.2891pt) -- (3482.0587pt,129.2891pt);
\draw[pstyle12] (5pt,192.519pt) rectangle (3592.3698pt,195.519pt);
\draw[pstyle13] (5pt,192.519pt) -- (3592.3698pt,192.519pt);
\draw[pstyle13] (5pt,195.519pt) -- (3592.3698pt,195.519pt);
\draw[pstyle14] (1755.4087pt,181.8828pt) rectangle (1841.9611pt,205.1553pt);
\node at (1761.4087pt,185.8828pt)[below right,color=black]{\textbf{Startup }};
\draw[pstyle9] (651.1718pt,277.6865pt) -- (661.1718pt,281.6865pt) -- (651.1718pt,285.6865pt) -- (655.1718pt,281.6865pt) -- cycle;
\draw[pstyle15] (435.0088pt,281.6865pt) -- (657.1718pt,281.6865pt);
\node at (447.0088pt,241.7847pt)[below right,color=black]{\textbf{1}};
\node at (517.3536pt,219.1553pt)[below right,color=black]{initialize()};
\node at (460.9199pt,234.2881pt)[below right,color=black]{FactoryLLM.create\_llm()};
\node at (498.2476pt,249.4209pt)[below right,color=black]{ChatMemory};
\node at (596.5714pt,249.4209pt)[below right,color=black]{ };
\node at (601.3714pt,249.4209pt)[below right,color=black]{+};
\node at (497.251pt,264.5537pt)[below right,color=black]{ChatDB};
\node at (556.5741pt,264.5537pt)[below right,color=black]{ };
\node at (561.3741pt,264.5537pt)[below right,color=black]{session};
\draw[pstyle9] (3157.8146pt,321.9521pt) -- (3167.8146pt,325.9521pt) -- (3157.8146pt,329.9521pt) -- (3161.8146pt,325.9521pt) -- cycle;
\draw[pstyle15] (673.1718pt,325.9521pt) -- (3163.8146pt,325.9521pt);
\node at (1794.117pt,301.1831pt)[below right,color=black]{\textbf{2}};
\node at (1808.0281pt,293.6865pt)[below right,color=black]{ensure\_schema()/create\_session};
\node at (1884.867pt,308.8193pt)[below right,color=black]{(if};
\node at (1901.667pt,308.8193pt)[below right,color=black]{ };
\node at (1906.467pt,308.8193pt)[below right,color=black]{enabled)};
\draw[pstyle16] (440.0088pt,338.9521pt) -- (440.0088pt,378.9521pt) -- (1198.0088pt,378.9521pt) -- (1198.0088pt,348.9521pt) -- (1188.0088pt,338.9521pt) -- (440.0088pt,338.9521pt);
\draw[pstyle16] (1188.0088pt,338.9521pt) -- (1188.0088pt,348.9521pt) -- (1198.0088pt,348.9521pt) -- (1188.0088pt,338.9521pt);
\node at (446.0088pt,343.9521pt)[below right,color=black]{Typical launch:};
\node at (446.0088pt,359.085pt)[below right,color=black]{docker compose -f docker/compose.dev.yaml run geollm   python -m llm\_geoprocessing.app.main};
\draw[pstyle12] (5pt,404.854pt) rectangle (3592.3698pt,407.854pt);
\draw[pstyle13] (5pt,404.854pt) -- (3592.3698pt,404.854pt);
\draw[pstyle13] (5pt,407.854pt) -- (3592.3698pt,407.854pt);
\draw[pstyle14] (1688.8122pt,394.2178pt) rectangle (1908.5576pt,417.4902pt);
\node at (1694.8122pt,398.2178pt)[below right,color=black]{\textbf{Input + Mode Selection }};
\draw[pstyle9] (177.5185pt,444.7627pt) -- (187.5185pt,448.7627pt) -- (177.5185pt,452.7627pt) -- (181.5185pt,448.7627pt) -- cycle;
\draw[pstyle15] (43pt,448.7627pt) -- (183.5185pt,448.7627pt);
\node at (55pt,431.4902pt)[below right,color=black]{\textbf{3}};
\node at (68.9111pt,431.5601pt)[below right,color=black]{enter};
\node at (108.5111pt,431.5601pt)[below right,color=black]{ };
\node at (113.3111pt,431.5601pt)[below right,color=black]{message};
\draw[pstyle9] (418.0088pt,474.0352pt) -- (428.0088pt,478.0352pt) -- (418.0088pt,482.0352pt) -- (422.0088pt,478.0352pt) -- cycle;
\draw[pstyle15] (199.5185pt,478.0352pt) -- (424.0088pt,478.0352pt);
\node at (292.2081pt,460.7627pt)[below right,color=black]{\textbf{4}};
\node at (306.1192pt,460.8325pt)[below right,color=black]{msg};
\draw[pstyle9] (656.1718pt,503.3076pt) -- (666.1718pt,507.3076pt) -- (656.1718pt,511.3076pt) -- (660.1718pt,507.3076pt) -- cycle;
\draw[pstyle15] (440.0088pt,507.3076pt) -- (662.1718pt,507.3076pt);
\node at (462.09pt,490.0352pt)[below right,color=black]{\textbf{5}};
\node at (476.0011pt,490.105pt)[below right,color=black]{check\_command(msg)};
\draw[pstyle9] (661.1718pt,532.5801pt) -- (671.1718pt,536.5801pt) -- (661.1718pt,540.5801pt) -- (665.1718pt,536.5801pt) -- cycle;
\draw[pstyle15] (440.0088pt,536.5801pt) -- (667.1718pt,536.5801pt);
\node at (472.7619pt,519.3076pt)[below right,color=black]{\textbf{6}};
\node at (486.673pt,519.3774pt)[below right,color=black]{mem.add\_user(msg)};
\draw[pstyle9] (3162.8146pt,576.8457pt) -- (3172.8146pt,580.8457pt) -- (3162.8146pt,584.8457pt) -- (3166.8146pt,580.8457pt) -- cycle;
\draw[pstyle15] (683.1718pt,580.8457pt) -- (3168.8146pt,580.8457pt);
\node at (1834.9308pt,556.0767pt)[below right,color=black]{\textbf{7}};
\node at (1848.8419pt,548.5801pt)[below right,color=black]{insert\_message("user")};
\node at (1892.367pt,563.7129pt)[below right,color=black]{(if};
\node at (1909.167pt,563.7129pt)[below right,color=black]{ };
\node at (1913.967pt,563.7129pt)[below right,color=black]{enabled)};
\draw[pstyle9] (964.3346pt,606.1182pt) -- (974.3346pt,610.1182pt) -- (964.3346pt,614.1182pt) -- (968.3346pt,610.1182pt) -- cycle;
\draw[pstyle15] (440.0088pt,610.1182pt) -- (970.3346pt,610.1182pt);
\node at (586.0533pt,592.8457pt)[below right,color=black]{\textbf{8}};
\node at (599.9644pt,592.9155pt)[below right,color=black]{define\_mode\_interaction(msg)};
\draw[pstyle9] (1915.8022pt,635.3906pt) -- (1925.8022pt,639.3906pt) -- (1915.8022pt,643.3906pt) -- (1919.8022pt,639.3906pt) -- cycle;
\draw[pstyle15] (986.3346pt,639.3906pt) -- (1921.8022pt,639.3906pt);
\node at (1323.4198pt,622.1182pt)[below right,color=black]{\textbf{9}};
\node at (1337.3309pt,622.188pt)[below right,color=black]{get\_metadata/get\_documentation};
\draw[pstyle9] (2174.1326pt,664.6631pt) -- (2184.1326pt,668.6631pt) -- (2174.1326pt,672.6631pt) -- (2178.1326pt,668.6631pt) -- cycle;
\draw[pstyle15] (986.3346pt,668.6631pt) -- (2180.1326pt,668.6631pt);
\node at (1447.6295pt,651.3906pt)[below right,color=black]{\textbf{10}};
\node at (1471.4517pt,651.4604pt)[below right,color=black]{get\_metadata/get\_documentation};
\draw[pstyle9] (699.1718pt,708.9287pt) -- (689.1718pt,712.9287pt) -- (699.1718pt,716.9287pt) -- (695.1718pt,712.9287pt) -- cycle;
\draw[pstyle15] (693.1718pt,712.9287pt) -- (975.3346pt,712.9287pt);
\node at (763.8875pt,688.1597pt)[below right,color=black]{\textbf{11}};
\node at (787.7098pt,680.6631pt)[below right,color=black]{clone()};
\node at (840.1461pt,680.6631pt)[below right,color=black]{ };
\node at (844.9461pt,680.6631pt)[below right,color=black]{+};
\node at (857.4189pt,680.6631pt)[below right,color=black]{ };
\node at (862.2189pt,680.6631pt)[below right,color=black]{build};
\node at (816.2622pt,695.7959pt)[below right,color=black]{prompt};
\draw[pstyle9] (2447.3476pt,738.2012pt) -- (2457.3476pt,742.2012pt) -- (2447.3476pt,746.2012pt) -- (2451.3476pt,742.2012pt) -- cycle;
\draw[pstyle15] (688.1718pt,742.2012pt) -- (2453.3476pt,742.2012pt);
\node at (1489.6978pt,724.9287pt)[below right,color=black]{\textbf{12}};
\node at (1513.52pt,724.9985pt)[below right,color=black]{chat\_once(prompt)};
\draw[pstyle9] (699.1718pt,767.4736pt) -- (689.1718pt,771.4736pt) -- (699.1718pt,775.4736pt) -- (695.1718pt,771.4736pt) -- cycle;
\draw[pstyle17] (693.1718pt,771.4736pt) -- (2458.3476pt,771.4736pt);
\node at (1508.1343pt,754.2012pt)[below right,color=black]{\textbf{13}};
\node at (1531.9565pt,754.271pt)[below right,color=black]{selected};
\node at (1593.1565pt,754.271pt)[below right,color=black]{ };
\node at (1597.9565pt,754.271pt)[below right,color=black]{mode};
\draw[pstyle9] (964.3346pt,796.7461pt) -- (974.3346pt,800.7461pt) -- (964.3346pt,804.7461pt) -- (968.3346pt,800.7461pt) -- cycle;
\draw[pstyle17] (688.1718pt,800.7461pt) -- (970.3346pt,800.7461pt);
\node at (766.6278pt,783.4736pt)[below right,color=black]{\textbf{14}};
\node at (790.45pt,783.5435pt)[below right,color=black]{selected};
\node at (851.65pt,783.5435pt)[below right,color=black]{ };
\node at (856.45pt,783.5435pt)[below right,color=black]{mode};
\draw[pstyle18] (97.6pt,812.7461pt) -- (167.0381pt,812.7461pt) -- (167.0381pt,820.0186pt) -- (157.0381pt,830.0186pt) -- (97.6pt,830.0186pt) -- (97.6pt,812.7461pt);
\draw[pstyle19] (97.6pt,812.7461pt) rectangle (2588.9433pt,1045.6396pt);
\node at (112.6pt,813.7461pt)[below right,color=black]{\textbf{alt}};
\node at (182.0381pt,814.7461pt)[below right,color=black]{\textbf{["Consulta de Capacidades"]}};
\draw[pstyle9] (699.1718pt,872.2842pt) -- (689.1718pt,876.2842pt) -- (699.1718pt,880.2842pt) -- (695.1718pt,876.2842pt) -- cycle;
\draw[pstyle15] (693.1718pt,876.2842pt) -- (975.3346pt,876.2842pt);
\node at (700.1718pt,851.5151pt)[below right,color=black]{\textbf{15}};
\node at (723.994pt,844.0186pt)[below right,color=black]{clone().send\_message(summary};
\node at (813.2335pt,859.1514pt)[below right,color=black]{prompt)};
\draw[pstyle9] (2447.3476pt,916.5498pt) -- (2457.3476pt,920.5498pt) -- (2447.3476pt,924.5498pt) -- (2451.3476pt,920.5498pt) -- cycle;
\draw[pstyle15] (688.1718pt,920.5498pt) -- (2453.3476pt,920.5498pt);
\node at (1518.487pt,895.7808pt)[below right,color=black]{\textbf{16}};
\node at (1544.2423pt,888.2842pt)[below right,color=black]{summarize};
\node at (1542.3092pt,903.417pt)[below right,color=black]{capabilities};
\draw[pstyle9] (699.1718pt,945.8223pt) -- (689.1718pt,949.8223pt) -- (699.1718pt,953.8223pt) -- (695.1718pt,949.8223pt) -- cycle;
\draw[pstyle17] (693.1718pt,949.8223pt) -- (2458.3476pt,949.8223pt);
\node at (1526.7537pt,932.5498pt)[below right,color=black]{\textbf{17}};
\node at (1550.5759pt,932.6196pt)[below right,color=black]{summary};
\draw[pstyle9] (215.5185pt,975.0947pt) -- (205.5185pt,979.0947pt) -- (215.5185pt,983.0947pt) -- (211.5185pt,979.0947pt) -- cycle;
\draw[pstyle15] (209.5185pt,979.0947pt) -- (662.1718pt,979.0947pt);
\node at (305.7116pt,961.8223pt)[below right,color=black]{\textbf{18}};
\node at (329.5338pt,961.8921pt)[below right,color=black]{print\_assistant\_msg(summary)};
\draw[pstyle9] (451.0088pt,1004.3672pt) -- (441.0088pt,1008.3672pt) -- (451.0088pt,1012.3672pt) -- (447.0088pt,1008.3672pt) -- cycle;
\draw[pstyle17] (445.0088pt,1008.3672pt) -- (975.3346pt,1008.3672pt);
\node at (640.214pt,991.0947pt)[below right,color=black]{\textbf{19}};
\node at (664.0362pt,991.1646pt)[below right,color=black]{"ask};
\node at (697.3505pt,991.1646pt)[below right,color=black]{ };
\node at (702.1505pt,991.1646pt)[below right,color=black]{for};
\node at (724.5294pt,991.1646pt)[below right,color=black]{ };
\node at (729.3294pt,991.1646pt)[below right,color=black]{input"};
\draw[pstyle9] (220.5185pt,1033.6396pt) -- (210.5185pt,1037.6396pt) -- (220.5185pt,1041.6396pt) -- (216.5185pt,1037.6396pt) -- cycle;
\draw[pstyle15] (214.5185pt,1037.6396pt) -- (429.0088pt,1037.6396pt);
\node at (244.9318pt,1020.3672pt)[below right,color=black]{\textbf{20}};
\node at (268.754pt,1020.437pt)[below right,color=black]{ask\_user\_input()};
\draw[pstyle9] (451.0088pt,1091.9053pt) -- (441.0088pt,1095.9053pt) -- (451.0088pt,1099.9053pt) -- (447.0088pt,1095.9053pt) -- cycle;
\draw[pstyle17] (445.0088pt,1095.9053pt) -- (980.3346pt,1095.9053pt);
\node at (634.1738pt,1071.1362pt)[below right,color=black]{\textbf{21}};
\node at (657.996pt,1063.6396pt)[below right,color=black]{geoprocessing};
\node at (766.1411pt,1063.6396pt)[below right,color=black]{ };
\node at (770.9411pt,1063.6396pt)[below right,color=black]{or};
\node at (681.1828pt,1078.7725pt)[below right,color=black]{interpreter};
\draw[pstyle9] (225.5185pt,1121.1777pt) -- (215.5185pt,1125.1777pt) -- (225.5185pt,1129.1777pt) -- (221.5185pt,1125.1777pt) -- cycle;
\draw[pstyle15] (219.5185pt,1125.1777pt) -- (429.0088pt,1125.1777pt);
\node at (226.5185pt,1107.9053pt)[below right,color=black]{\textbf{22}};
\node at (250.3407pt,1107.9751pt)[below right,color=black]{print\_mode\_selected()};
\draw[pstyle12] (5pt,1153.814pt) rectangle (3592.3698pt,1156.814pt);
\draw[pstyle13] (5pt,1153.814pt) -- (3592.3698pt,1153.814pt);
\draw[pstyle13] (5pt,1156.814pt) -- (3592.3698pt,1156.814pt);
\draw[pstyle14] (1746.7836pt,1143.1777pt) rectangle (1850.5862pt,1166.4502pt);
\node at (1752.7836pt,1147.1777pt)[below right,color=black]{\textbf{Execution }};
\draw[pstyle18] (8pt,1180.4502pt) -- (77.4381pt,1180.4502pt) -- (77.4381pt,1187.7227pt) -- (67.4381pt,1197.7227pt) -- (8pt,1197.7227pt) -- (8pt,1180.4502pt);
\draw[pstyle19] (8pt,1180.4502pt) rectangle (3583.3698pt,2671.4297pt);
\node at (23pt,1181.4502pt)[below right,color=black]{\textbf{alt}};
\node at (92.4381pt,1182.4502pt)[below right,color=black]{\textbf{[Geoprocessing selected]}};
\draw[color=black,line width=1.0pt,dash pattern=on 2.0pt off 2.0pt] (8pt,2576.9756pt) -- (3583.3698pt,2576.9756pt);
\node at (13pt,2578.9756pt)[below right,color=black]{\textbf{[Interpreter-only selected]}};
\draw[pstyle9] (1209.8323pt,1239.9883pt) -- (1219.8323pt,1243.9883pt) -- (1209.8323pt,1247.9883pt) -- (1213.8323pt,1243.9883pt) -- cycle;
\draw[pstyle15] (440.0088pt,1243.9883pt) -- (1215.8323pt,1243.9883pt);
\node at (765.7428pt,1219.2192pt)[below right,color=black]{\textbf{23}};
\node at (789.565pt,1211.7227pt)[below right,color=black]{main(chatbot,};
\node at (791.9375pt,1226.8555pt)[below right,color=black]{chat\_io,};
\node at (851.7258pt,1226.8555pt)[below right,color=black]{ };
\node at (856.5258pt,1226.8555pt)[below right,color=black]{msg)};
\draw[pstyle9] (1920.8022pt,1269.2607pt) -- (1930.8022pt,1273.2607pt) -- (1920.8022pt,1277.2607pt) -- (1924.8022pt,1273.2607pt) -- cycle;
\draw[pstyle15] (1231.8323pt,1273.2607pt) -- (1926.8022pt,1273.2607pt);
\node at (1443.7131pt,1255.9883pt)[below right,color=black]{\textbf{24}};
\node at (1467.5353pt,1256.0581pt)[below right,color=black]{get\_metadata/get\_documentation};
\draw[pstyle9] (2179.1326pt,1298.5332pt) -- (2189.1326pt,1302.5332pt) -- (2179.1326pt,1306.5332pt) -- (2183.1326pt,1302.5332pt) -- cycle;
\draw[pstyle15] (1231.8323pt,1302.5332pt) -- (2185.1326pt,1302.5332pt);
\node at (1572.8783pt,1285.2607pt)[below right,color=black]{\textbf{25}};
\node at (1596.7005pt,1285.3306pt)[below right,color=black]{get\_metadata/get\_documentation};
\draw[pstyle9] (704.1718pt,1342.7988pt) -- (694.1718pt,1346.7988pt) -- (704.1718pt,1350.7988pt) -- (700.1718pt,1346.7988pt) -- cycle;
\draw[pstyle15] (698.1718pt,1346.7988pt) -- (1220.8323pt,1346.7988pt);
\node at (889.1364pt,1322.0298pt)[below right,color=black]{\textbf{26}};
\node at (912.9586pt,1314.5332pt)[below right,color=black]{clone()};
\node at (965.395pt,1314.5332pt)[below right,color=black]{ };
\node at (970.195pt,1314.5332pt)[below right,color=black]{+};
\node at (982.6677pt,1314.5332pt)[below right,color=black]{ };
\node at (987.4677pt,1314.5332pt)[below right,color=black]{build};
\node at (919.5056pt,1329.666pt)[below right,color=black]{JSON};
\node at (958.7164pt,1329.666pt)[below right,color=black]{ };
\node at (963.5164pt,1329.666pt)[below right,color=black]{prompt};
\draw[pstyle9] (2447.3476pt,1387.0645pt) -- (2457.3476pt,1391.0645pt) -- (2447.3476pt,1395.0645pt) -- (2451.3476pt,1391.0645pt) -- cycle;
\draw[pstyle15] (693.1718pt,1391.0645pt) -- (2453.3476pt,1391.0645pt);
\node at (1479.3878pt,1366.2954pt)[below right,color=black]{\textbf{27}};
\node at (1503.21pt,1358.7988pt)[below right,color=black]{send\_message(schema};
\node at (1557.2401pt,1373.9316pt)[below right,color=black]{prompt)};
\draw[pstyle9] (704.1718pt,1416.3369pt) -- (694.1718pt,1420.3369pt) -- (704.1718pt,1424.3369pt) -- (700.1718pt,1420.3369pt) -- cycle;
\draw[pstyle17] (698.1718pt,1420.3369pt) -- (2458.3476pt,1420.3369pt);
\node at (1510.4617pt,1403.0645pt)[below right,color=black]{\textbf{28}};
\node at (1534.2839pt,1403.1343pt)[below right,color=black]{JSON};
\node at (1573.4947pt,1403.1343pt)[below right,color=black]{ };
\node at (1578.2947pt,1403.1343pt)[below right,color=black]{wrapper};
\draw[pstyle18] (27pt,1432.3369pt) -- (108pt,1432.3369pt) -- (108pt,1439.6094pt) -- (98pt,1449.6094pt) -- (27pt,1449.6094pt) -- (27pt,1432.3369pt);
\draw[pstyle19] (27pt,1432.3369pt) rectangle (2588.9433pt,1665.2305pt);
\node at (42pt,1433.3369pt)[below right,color=black]{\textbf{loop}};
\node at (123pt,1434.3369pt)[below right,color=black]{\textbf{[until complete or max turns]}};
\draw[pstyle9] (230.5185pt,1476.8818pt) -- (220.5185pt,1480.8818pt) -- (230.5185pt,1484.8818pt) -- (226.5185pt,1480.8818pt) -- cycle;
\draw[pstyle15] (224.5185pt,1480.8818pt) -- (1220.8323pt,1480.8818pt);
\node at (591.8841pt,1463.6094pt)[below right,color=black]{\textbf{29}};
\node at (615.7063pt,1463.6792pt)[below right,color=black]{print\_assistant\_msg(questions)};
\draw[pstyle9] (202.5185pt,1506.1543pt) -- (212.5185pt,1510.1543pt) -- (202.5185pt,1514.1543pt) -- (206.5185pt,1510.1543pt) -- cycle;
\draw[pstyle15] (43pt,1510.1543pt) -- (208.5185pt,1510.1543pt);
\node at (86.1866pt,1492.8818pt)[below right,color=black]{\textbf{30}};
\node at (110.0088pt,1492.9517pt)[below right,color=black]{answers};
\draw[pstyle9] (1214.8323pt,1535.4268pt) -- (1224.8323pt,1539.4268pt) -- (1214.8323pt,1543.4268pt) -- (1218.8323pt,1539.4268pt) -- cycle;
\draw[pstyle15] (224.5185pt,1539.4268pt) -- (1220.8323pt,1539.4268pt);
\node at (666.5893pt,1522.1543pt)[below right,color=black]{\textbf{31}};
\node at (690.4115pt,1522.2241pt)[below right,color=black]{user\_answer};
\draw[pstyle9] (709.1718pt,1564.6992pt) -- (699.1718pt,1568.6992pt) -- (709.1718pt,1572.6992pt) -- (705.1718pt,1568.6992pt) -- cycle;
\draw[pstyle15] (703.1718pt,1568.6992pt) -- (1220.8323pt,1568.6992pt);
\node at (859.7111pt,1551.4268pt)[below right,color=black]{\textbf{32}};
\node at (883.5333pt,1551.4966pt)[below right,color=black]{mem.add\_user(answer)};
\draw[pstyle9] (2447.3476pt,1608.9648pt) -- (2457.3476pt,1612.9648pt) -- (2447.3476pt,1616.9648pt) -- (2451.3476pt,1612.9648pt) -- cycle;
\draw[pstyle15] (698.1718pt,1612.9648pt) -- (2453.3476pt,1612.9648pt);
\node at (1484.2687pt,1588.1958pt)[below right,color=black]{\textbf{33}};
\node at (1508.091pt,1580.6992pt)[below right,color=black]{send\_message(update};
\node at (1559.7401pt,1595.832pt)[below right,color=black]{prompt)};
\draw[pstyle9] (709.1718pt,1653.2305pt) -- (699.1718pt,1657.2305pt) -- (709.1718pt,1661.2305pt) -- (705.1718pt,1657.2305pt) -- cycle;
\draw[pstyle17] (703.1718pt,1657.2305pt) -- (2458.3476pt,1657.2305pt);
\node at (1513.9124pt,1632.4614pt)[below right,color=black]{\textbf{34}};
\node at (1537.7346pt,1624.9648pt)[below right,color=black]{updated};
\node at (1599.5962pt,1624.9648pt)[below right,color=black]{ };
\node at (1604.3962pt,1624.9648pt)[below right,color=black]{JSON};
\node at (1558.7893pt,1640.0977pt)[below right,color=black]{wrapper};
\draw[pstyle15] (1236.8323pt,1715.4961pt) -- (1283.8323pt,1715.4961pt);
\draw[pstyle15] (1283.8323pt,1715.4961pt) -- (1283.8323pt,1728.4961pt);
\draw[pstyle15] (1242.8323pt,1728.4961pt) -- (1283.8323pt,1728.4961pt);
\draw[pstyle9] (1252.8323pt,1724.4961pt) -- (1242.8323pt,1728.4961pt) -- (1252.8323pt,1732.4961pt) -- (1248.8323pt,1728.4961pt) -- cycle;
\node at (1248.8323pt,1690.7271pt)[below right,color=black]{\textbf{35}};
\node at (1288.1649pt,1683.2305pt)[below right,color=black]{validate/fix};
\node at (1371.8438pt,1683.2305pt)[below right,color=black]{ };
\node at (1376.6438pt,1683.2305pt)[below right,color=black]{JSON};
\node at (1272.6545pt,1698.3633pt)[below right,color=black]{(check\_and\_fix\_json)};
\draw[pstyle9] (714.1718pt,1768.7617pt) -- (704.1718pt,1772.7617pt) -- (714.1718pt,1776.7617pt) -- (710.1718pt,1772.7617pt) -- cycle;
\draw[pstyle15] (708.1718pt,1772.7617pt) -- (1220.8323pt,1772.7617pt);
\node at (832.4809pt,1747.9927pt)[below right,color=black]{\textbf{36}};
\node at (856.3031pt,1740.4961pt)[below right,color=black]{mem.add\_assistant("Generated};
\node at (938.6077pt,1755.6289pt)[below right,color=black]{JSON};
\node at (977.8186pt,1755.6289pt)[below right,color=black]{ };
\node at (982.6186pt,1755.6289pt)[below right,color=black]{...")};
\draw[pstyle9] (3167.8146pt,1813.0273pt) -- (3177.8146pt,1817.0273pt) -- (3167.8146pt,1821.0273pt) -- (3171.8146pt,1817.0273pt) -- cycle;
\draw[pstyle15] (703.1718pt,1817.0273pt) -- (3173.8146pt,1817.0273pt);
\node at (1825.5878pt,1792.2583pt)[below right,color=black]{\textbf{37}};
\node at (1849.41pt,1784.7617pt)[below right,color=black]{insert\_message("assistant")};
\node at (1909.8225pt,1799.8945pt)[below right,color=black]{(if};
\node at (1926.6225pt,1799.8945pt)[below right,color=black]{ };
\node at (1931.4225pt,1799.8945pt)[below right,color=black]{enabled)};
\draw[pstyle9] (3172.8146pt,1857.293pt) -- (3182.8146pt,1861.293pt) -- (3172.8146pt,1865.293pt) -- (3176.8146pt,1861.293pt) -- cycle;
\draw[pstyle15] (1241.8323pt,1861.293pt) -- (3178.8146pt,1861.293pt);
\node at (2132.3064pt,1836.5239pt)[below right,color=black]{\textbf{38}};
\node at (2156.1286pt,1829.0273pt)[below right,color=black]{start\_run(params)};
\node at (2181.6528pt,1844.1602pt)[below right,color=black]{(if};
\node at (2198.4528pt,1844.1602pt)[below right,color=black]{ };
\node at (2203.2528pt,1844.1602pt)[below right,color=black]{enabled)};
\draw[pstyle18] (1191.8323pt,1873.293pt) -- (1272.8323pt,1873.293pt) -- (1272.8323pt,1880.5654pt) -- (1262.8323pt,1890.5654pt) -- (1191.8323pt,1890.5654pt) -- (1191.8323pt,1873.293pt);
\draw[pstyle19] (1191.8323pt,1873.293pt) rectangle (3558.3698pt,2388.9131pt);
\node at (1206.8323pt,1874.293pt)[below right,color=black]{\textbf{loop}};
\node at (1287.8323pt,1875.293pt)[below right,color=black]{\textbf{[for each action]}};
\draw[pstyle9] (1672.4492pt,1932.8311pt) -- (1682.4492pt,1936.8311pt) -- (1672.4492pt,1940.8311pt) -- (1676.4492pt,1936.8311pt) -- cycle;
\draw[pstyle15] (1241.8323pt,1936.8311pt) -- (1678.4492pt,1936.8311pt);
\node at (1368.8656pt,1912.062pt)[below right,color=black]{\textbf{39}};
\node at (1392.6878pt,1904.5654pt)[below right,color=black]{execute\_action(name,};
\node at (1443.7801pt,1919.6982pt)[below right,color=black]{params)};
\draw[pstyle9] (2730.6497pt,1992.2295pt) -- (2740.6497pt,1996.2295pt) -- (2730.6497pt,2000.2295pt) -- (2734.6497pt,1996.2295pt) -- cycle;
\draw[pstyle15] (1694.4492pt,1996.2295pt) -- (2736.6497pt,1996.2295pt);
\node at (2141.7888pt,1963.894pt)[below right,color=black]{\textbf{40}};
\node at (2214.1272pt,1948.8311pt)[below right,color=black]{GET};
\node at (2165.611pt,1963.9639pt)[below right,color=black]{/tif/\{geoprocess\}};
\node at (2178.2439pt,1979.0967pt)[below right,color=black]{query};
\node at (2221.4439pt,1979.0967pt)[below right,color=black]{ };
\node at (2226.2439pt,1979.0967pt)[below right,color=black]{params};
\draw[pstyle9] (2959.6273pt,2036.4951pt) -- (2969.6273pt,2040.4951pt) -- (2959.6273pt,2044.4951pt) -- (2963.6273pt,2040.4951pt) -- cycle;
\draw[pstyle15] (2752.6497pt,2040.4951pt) -- (2965.6273pt,2040.4951pt);
\node at (2784.5337pt,2015.7261pt)[below right,color=black]{\textbf{41}};
\node at (2808.3559pt,2008.2295pt)[below right,color=black]{run};
\node at (2834.7559pt,2008.2295pt)[below right,color=black]{ };
\node at (2839.5559pt,2008.2295pt)[below right,color=black]{Earth};
\node at (2882.0099pt,2008.2295pt)[below right,color=black]{ };
\node at (2886.8099pt,2008.2295pt)[below right,color=black]{Engine};
\node at (2837.6238pt,2023.3623pt)[below right,color=black]{operation};
\draw[pstyle9] (2763.6497pt,2065.7676pt) -- (2753.6497pt,2069.7676pt) -- (2763.6497pt,2073.7676pt) -- (2759.6497pt,2069.7676pt) -- cycle;
\draw[pstyle17] (2757.6497pt,2069.7676pt) -- (2970.6273pt,2069.7676pt);
\node at (2815.2274pt,2052.4951pt)[below right,color=black]{\textbf{42}};
\node at (2839.0496pt,2052.5649pt)[below right,color=black]{tile};
\node at (2863.0496pt,2052.5649pt)[below right,color=black]{ };
\node at (2867.8496pt,2052.5649pt)[below right,color=black]{URLs};
\draw[pstyle9] (1705.4492pt,2095.04pt) -- (1695.4492pt,2099.04pt) -- (1705.4492pt,2103.04pt) -- (1701.4492pt,2099.04pt) -- cycle;
\draw[pstyle17] (1699.4492pt,2099.04pt) -- (2741.6497pt,2099.04pt);
\node at (2141.3808pt,2081.7676pt)[below right,color=black]{\textbf{43}};
\node at (2165.2031pt,2081.8374pt)[below right,color=black]{JSON};
\node at (2204.4139pt,2081.8374pt)[below right,color=black]{ };
\node at (2209.2139pt,2081.8374pt)[below right,color=black]{output\_urls};
\draw[pstyle9] (1252.8323pt,2124.3125pt) -- (1242.8323pt,2128.3125pt) -- (1252.8323pt,2132.3125pt) -- (1248.8323pt,2128.3125pt) -- cycle;
\draw[pstyle17] (1246.8323pt,2128.3125pt) -- (1683.4492pt,2128.3125pt);
\node at (1407.9776pt,2111.04pt)[below right,color=black]{\textbf{44}};
\node at (1431.7998pt,2111.1099pt)[below right,color=black]{output\_urls};
\draw[pstyle9] (3453.0587pt,2183.7109pt) -- (3463.0587pt,2187.7109pt) -- (3453.0587pt,2191.7109pt) -- (3457.0587pt,2187.7109pt) -- cycle;
\draw[pstyle15] (1241.8323pt,2187.7109pt) -- (3459.0587pt,2187.7109pt);
\node at (2277.9869pt,2155.3755pt)[below right,color=black]{\textbf{45}};
\node at (2301.8091pt,2140.3125pt)[below right,color=black]{download};
\node at (2375.6314pt,2140.3125pt)[below right,color=black]{ };
\node at (2380.4314pt,2140.3125pt)[below right,color=black]{tiles};
\node at (2411.6314pt,2140.3125pt)[below right,color=black]{ };
\node at (2416.4314pt,2140.3125pt)[below right,color=black]{+};
\node at (2341.3566pt,2155.4453pt)[below right,color=black]{merge};
\node at (2336.5566pt,2170.5781pt)[below right,color=black]{(GDAL)};
\draw[pstyle9] (3177.8146pt,2243.1094pt) -- (3187.8146pt,2247.1094pt) -- (3177.8146pt,2251.1094pt) -- (3181.8146pt,2247.1094pt) -- cycle;
\draw[pstyle15] (1241.8323pt,2247.1094pt) -- (3183.8146pt,2247.1094pt);
\node at (2118.304pt,2214.7739pt)[below right,color=black]{\textbf{46}};
\node at (2142.1262pt,2199.7109pt)[below right,color=black]{insert\_artifact(merged};
\node at (2212.7346pt,2214.8438pt)[below right,color=black]{file)};
\node at (2184.1528pt,2229.9766pt)[below right,color=black]{(if};
\node at (2200.9528pt,2229.9766pt)[below right,color=black]{ };
\node at (2205.7528pt,2229.9766pt)[below right,color=black]{enabled)};
\draw[pstyle18] (1210.8323pt,2259.1094pt) -- (1284.1323pt,2259.1094pt) -- (1284.1323pt,2266.3818pt) -- (1274.1323pt,2276.3818pt) -- (1210.8323pt,2276.3818pt) -- (1210.8323pt,2259.1094pt);
\draw[pstyle19] (1210.8323pt,2259.1094pt) rectangle (3403.7476pt,2374.9131pt);
\node at (1225.8323pt,2260.1094pt)[below right,color=black]{\textbf{opt}};
\node at (1299.1323pt,2261.1094pt)[below right,color=black]{\textbf{[POSTGIS\_ENABLED]}};
\draw[pstyle9] (3306.2392pt,2318.6475pt) -- (3316.2392pt,2322.6475pt) -- (3306.2392pt,2326.6475pt) -- (3310.2392pt,2322.6475pt) -- cycle;
\draw[pstyle15] (1241.8323pt,2322.6475pt) -- (3312.2392pt,2322.6475pt);
\node at (2215.5996pt,2297.8784pt)[below right,color=black]{\textbf{47}};
\node at (2239.4218pt,2290.3818pt)[below right,color=black]{raster2pgsql};
\node at (2334.8718pt,2290.3818pt)[below right,color=black]{ };
\node at (2339.6718pt,2290.3818pt)[below right,color=black]{|};
\node at (2276.3468pt,2305.5146pt)[below right,color=black]{psql};
\draw[pstyle9] (3182.8146pt,2362.9131pt) -- (3192.8146pt,2366.9131pt) -- (3182.8146pt,2370.9131pt) -- (3186.8146pt,2366.9131pt) -- cycle;
\draw[pstyle15] (1241.8323pt,2366.9131pt) -- (3188.8146pt,2366.9131pt);
\node at (2127.5748pt,2342.144pt)[below right,color=black]{\textbf{48}};
\node at (2151.397pt,2334.6475pt)[below right,color=black]{insert\_artifact(table)};
\node at (2186.6528pt,2349.7803pt)[below right,color=black]{(if};
\node at (2203.4528pt,2349.7803pt)[below right,color=black]{ };
\node at (2208.2528pt,2349.7803pt)[below right,color=black]{enabled)};
\draw[pstyle9] (3187.8146pt,2435.1787pt) -- (3197.8146pt,2439.1787pt) -- (3187.8146pt,2443.1787pt) -- (3191.8146pt,2439.1787pt) -- cycle;
\draw[pstyle15] (1241.8323pt,2439.1787pt) -- (3193.8146pt,2439.1787pt);
\node at (2142.1766pt,2414.4097pt)[below right,color=black]{\textbf{49}};
\node at (2165.9989pt,2406.9131pt)[below right,color=black]{finish\_run(status)};
\node at (2189.1528pt,2422.0459pt)[below right,color=black]{(if};
\node at (2205.9528pt,2422.0459pt)[below right,color=black]{ };
\node at (2210.7528pt,2422.0459pt)[below right,color=black]{enabled)};
\draw[pstyle9] (451.0088pt,2479.4443pt) -- (441.0088pt,2483.4443pt) -- (451.0088pt,2487.4443pt) -- (447.0088pt,2483.4443pt) -- cycle;
\draw[pstyle17] (445.0088pt,2483.4443pt) -- (1220.8323pt,2483.4443pt);
\node at (776.9728pt,2458.6753pt)[below right,color=black]{\textbf{50}};
\node at (800.795pt,2451.1787pt)[below right,color=black]{geoprocess};
\node at (807.7367pt,2466.3115pt)[below right,color=black]{summary};
\draw[pstyle9] (1441.9198pt,2553.9756pt) -- (1451.9198pt,2557.9756pt) -- (1441.9198pt,2561.9756pt) -- (1445.9198pt,2557.9756pt) -- cycle;
\draw[pstyle15] (440.0088pt,2557.9756pt) -- (1447.9198pt,2557.9756pt);
\node at (865.5389pt,2518.0737pt)[below right,color=black]{\textbf{51}};
\node at (905.6087pt,2495.4443pt)[below right,color=black]{main(chatbot,};
\node at (928.9813pt,2510.5771pt)[below right,color=black]{chat\_io,};
\node at (889.3611pt,2525.71pt)[below right,color=black]{summary,};
\node at (964.3897pt,2525.71pt)[below right,color=black]{ };
\node at (969.1897pt,2525.71pt)[below right,color=black]{original};
\node at (940.2754pt,2540.8428pt)[below right,color=black]{msg)};
\draw[pstyle9] (1446.9198pt,2659.4297pt) -- (1456.9198pt,2663.4297pt) -- (1446.9198pt,2667.4297pt) -- (1450.9198pt,2663.4297pt) -- cycle;
\draw[pstyle15] (440.0088pt,2663.4297pt) -- (1452.9198pt,2663.4297pt);
\node at (882.9224pt,2623.5278pt)[below right,color=black]{\textbf{52}};
\node at (908.1087pt,2600.8984pt)[below right,color=black]{main(chatbot,};
\node at (931.4813pt,2616.0313pt)[below right,color=black]{chat\_io,};
\node at (906.7446pt,2631.1641pt)[below right,color=black]{None,};
\node at (952.0062pt,2631.1641pt)[below right,color=black]{ };
\node at (956.8062pt,2631.1641pt)[below right,color=black]{original};
\node at (942.7754pt,2646.2969pt)[below right,color=black]{msg)};
\draw[pstyle9] (719.1718pt,2717.6953pt) -- (709.1718pt,2721.6953pt) -- (719.1718pt,2725.6953pt) -- (715.1718pt,2721.6953pt) -- cycle;
\draw[pstyle15] (713.1718pt,2721.6953pt) -- (1452.9198pt,2721.6953pt);
\node at (1005.5183pt,2696.9263pt)[below right,color=black]{\textbf{53}};
\node at (1036.5023pt,2689.4297pt)[below right,color=black]{clone()};
\node at (1088.9387pt,2689.4297pt)[below right,color=black]{ };
\node at (1093.7387pt,2689.4297pt)[below right,color=black]{+};
\node at (1106.2114pt,2689.4297pt)[below right,color=black]{ };
\node at (1111.0114pt,2689.4297pt)[below right,color=black]{build};
\node at (1029.3405pt,2704.5625pt)[below right,color=black]{response};
\node at (1095.9691pt,2704.5625pt)[below right,color=black]{ };
\node at (1100.7691pt,2704.5625pt)[below right,color=black]{prompt};
\draw[pstyle18] (1442.9198pt,2733.6953pt) -- (1516.2198pt,2733.6953pt) -- (1516.2198pt,2740.9678pt) -- (1506.2198pt,2750.9678pt) -- (1442.9198pt,2750.9678pt) -- (1442.9198pt,2733.6953pt);
\draw[pstyle19] (1442.9198pt,2733.6953pt) rectangle (2331.752pt,2819.5127pt);
\node at (1457.9198pt,2734.6953pt)[below right,color=black]{\textbf{opt}};
\node at (1531.2198pt,2735.6953pt)[below right,color=black]{\textbf{[geoprocess summary present]}};
\draw[pstyle9] (1925.8022pt,2778.2402pt) -- (1935.8022pt,2782.2402pt) -- (1925.8022pt,2786.2402pt) -- (1929.8022pt,2782.2402pt) -- cycle;
\draw[pstyle15] (1468.9198pt,2782.2402pt) -- (1931.8022pt,2782.2402pt);
\node at (1564.7568pt,2764.9678pt)[below right,color=black]{\textbf{54}};
\node at (1588.5791pt,2765.0376pt)[below right,color=black]{get\_metadata/get\_documentation};
\draw[pstyle9] (2184.1326pt,2807.5127pt) -- (2194.1326pt,2811.5127pt) -- (2184.1326pt,2815.5127pt) -- (2188.1326pt,2811.5127pt) -- cycle;
\draw[pstyle15] (1468.9198pt,2811.5127pt) -- (2190.1326pt,2811.5127pt);
\node at (1693.9221pt,2794.2402pt)[below right,color=black]{\textbf{55}};
\node at (1717.7443pt,2794.3101pt)[below right,color=black]{get\_metadata/get\_documentation};
\draw[pstyle9] (2447.3476pt,2850.7852pt) -- (2457.3476pt,2854.7852pt) -- (2447.3476pt,2858.7852pt) -- (2451.3476pt,2854.7852pt) -- cycle;
\draw[pstyle15] (708.1718pt,2854.7852pt) -- (2453.3476pt,2854.7852pt);
\node at (1484.4649pt,2837.5127pt)[below right,color=black]{\textbf{56}};
\node at (1508.2871pt,2837.5825pt)[below right,color=black]{send\_message(prompt)};
\draw[pstyle9] (719.1718pt,2895.0508pt) -- (709.1718pt,2899.0508pt) -- (719.1718pt,2903.0508pt) -- (715.1718pt,2899.0508pt) -- cycle;
\draw[pstyle17] (713.1718pt,2899.0508pt) -- (2458.3476pt,2899.0508pt);
\node at (1506.8338pt,2874.2817pt)[below right,color=black]{\textbf{57}};
\node at (1530.656pt,2866.7852pt)[below right,color=black]{natural};
\node at (1586.0348pt,2866.7852pt)[below right,color=black]{ };
\node at (1590.8348pt,2866.7852pt)[below right,color=black]{language};
\node at (1562.3565pt,2881.918pt)[below right,color=black]{response};
\draw[pstyle9] (240.5185pt,2924.3232pt) -- (230.5185pt,2928.3232pt) -- (240.5185pt,2932.3232pt) -- (236.5185pt,2928.3232pt) -- cycle;
\draw[pstyle15] (234.5185pt,2928.3232pt) -- (1452.9198pt,2928.3232pt);
\node at (715.3552pt,2911.0508pt)[below right,color=black]{\textbf{58}};
\node at (739.1774pt,2911.1206pt)[below right,color=black]{print\_assistant\_msg(response)};
\draw[pstyle9] (724.1718pt,2953.5957pt) -- (714.1718pt,2957.5957pt) -- (724.1718pt,2961.5957pt) -- (720.1718pt,2957.5957pt) -- cycle;
\draw[pstyle15] (718.1718pt,2957.5957pt) -- (1452.9198pt,2957.5957pt);
\node at (960.1645pt,2940.3232pt)[below right,color=black]{\textbf{59}};
\node at (983.9867pt,2940.3931pt)[below right,color=black]{mem.add\_assistant(response)};
\draw[pstyle9] (3192.8146pt,2997.8613pt) -- (3202.8146pt,3001.8613pt) -- (3192.8146pt,3005.8613pt) -- (3196.8146pt,3001.8613pt) -- cycle;
\draw[pstyle15] (713.1718pt,3001.8613pt) -- (3198.8146pt,3001.8613pt);
\node at (1843.0878pt,2977.0923pt)[below right,color=black]{\textbf{60}};
\node at (1866.91pt,2969.5957pt)[below right,color=black]{insert\_message("assistant")};
\node at (1927.3225pt,2984.7285pt)[below right,color=black]{(if};
\node at (1944.1225pt,2984.7285pt)[below right,color=black]{ };
\node at (1948.9225pt,2984.7285pt)[below right,color=black]{enabled)};
\end{tikzpicture}
